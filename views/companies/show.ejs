<%- include('../partials/header') %>

<div class="container">
  <div class="card mb-4">
    <h2 class="card-head default-color white-text text-center py-4"><%=company.name%></h2>
    <div class="card-body">
      <div class="row justify-content-around">
        <div class="col-xl-5 col-md-8 col-sm-12">
          <div class="row justify-content-center justify-content-md-start align-items-center ml-md-3">
            <p class="card-text pt-3 pr-3"><i class="fas fa-home fa-4x blue-grey-text"></i></p>
            <p class="card-text align-self-center text-capitalize">
              <%=company.name%><br>
              <%=company.address%><br>
              <%=company.postalCode%> - <%=company.city%>
            </p>
          </div>    
        </div>
        <% if(company.phoneNumber){ %>
          <div class="col-xl-4 col-md-4 col-sm-12 row justify-content-center justify-content-md-start align-items-center">
            <p class="card-text pt-3 pr-3"><i class="fas fa-phone-square-alt fa-4x blue-grey-text"></i></p>
            <p class="card-text phone-number"><%=company.phoneNumber%></p>
          </div>
        <% }; %>
        <% if(company.links.website || company.links.linkedin){%>
          <div class="col-xl-3 col-md-6 col-sm-12 row justify-content-center">
            <% if(company.links.website) {%>
              <p class="card-text pt-3 mr-5"><a href="<%=company.links.website%>" target="_blank"><i class="fas fa-globe-europe fa-3x blue-grey-text"></i></a></p>
            <% }; %>
            <% if(company.links.linkedin) {%>
              <p class="card-text pt-3"><a href="<%=company.links.linkedin%>" target="_blank"><i class="fab fa-linkedin fa-3x blue-grey-text"></i></a></p>
            <% }; %>
          </div>
        <% }; %>
      </div>
    </div>
    <div class="card-footer d-flex justify-content-between align-items-center">
      <a href="/companies/<%=company._id%>/edit"><span class="badge badge-warning">Modifier</span></a>
      <a href="/companies/<%=company._id%>/contacts/new"><button type="button" class="btn btn-default btn-md float-right">Ajouter un nouveau contact</button></a>
    </div>
  </div>
  <div class="row">
    <% company.contacts.forEach(contact => { %>
      <div class="col-md-6 col-xl-4 mb-3">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title text-dark font-weight-bold text-capitalize"><%=contact.firstName%> <%=contact.lastName%></h4>
            <h5 class="card-subtitle mb-2 text-muted"><%=contact.job%></h5>
            <% if(contact.phoneNumber){ %>
              <p class="mt-3 mb-0">
                <i class="fas fa-phone-square-alt fa-lg blue-grey-text mr-2"></i><%=contact.phoneNumber%>
              </p>
            <% }; %>
            <% if(contact.email){ %>
              <p class="mb-0">
                <i class="fas fa-envelope-square fa-lg blue-grey-text mr-2"></i><%=contact.email%>
              </p>
            <% }; %>
            <% if(contact.linkedin){ %>
              <p class="mb-0">
                <i class="fab fa-linkedin fa-lg blue-grey-text mr-2"></i><%=contact.linkedin%>
              </p>
              <% }; %>
          </div>
          <div class="card-footer d-flex justify-content-md-start">
            <a href="/companies/<%=company._id%>/contacts/<%=contact._id%>/edit"><span class="badge badge-warning">Modifier</span></a>
          </div>
        </div>
      </div>
    <% }); %>
  </div>
</div>

<%- include('../partials/footer') %>